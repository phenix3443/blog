---
title: "以太坊账户模型"
description: 
date: 2022-05-11T12:13:20+08:00
image: 
math: 
license: 
hidden: false
comments: true
draft: true
---

区块链中有2类节点，全节点和轻节点，轻节点只会存储 `block header` ，所以轻节点如何才能校验账号是否合法呢？

区块链中的链表(哈希链)和常见链表不同的是将指针从地址改为了 hash 值，默克尔树和二叉树的区别有2个

1. 将地址改为了哈希值
2. 只有叶子节点存储数据

回到之前的问题，轻节点是如验证账户合法性呢？

1. 轻节点由于只存储 block header，所以拿到1个账号的时候会向全节点发出请求
2. 全节点存储了所有账户状态，将账户路径中的需要计算用到的hash值返回给轻节点
3. 轻节点本地进行计算根hash值，如果计算结果和自己存储一致则账户合法，不一致则不合法。

那以太坊中的账户信息的数据结构就是这样吗？
直接用这样的数据结构来存储账户信息会有2个问题

1.查找困难 
2.生成hash值不确定

第1个问题应该比较容易发现，在这个树中寻找1个账号需要的复杂度是O(n),因为没有任何顺序。

第二个问题其实也是因为无序导致的，无序的组合每个节点针对同一批账户生成的hash值不一致，这就导致无法达成共识。

https://mirror.xyz/0x3167e3c376FcC051D4460c1B923212B66dC6f450/desDIhssYHK5OkQe72DeDAgy1qKkCcvgK44xT6TE-Pk